if (self.CavalryLogger) { CavalryLogger.start_js(["iQZ7o"]); }

__d("CRMManualContactCreationDialogBodyClientDetailsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"page_contact_id"},b={defaultValue:null,kind:"LocalArgument",name:"page_id"},c=[{kind:"Variable",name:"id",variableName:"page_id"}],d=[{kind:"Variable",name:"page_contact_id",variableName:"page_contact_id"}],e={alias:"firstName",args:null,kind:"ScalarField",name:"first_name",storageKey:null},f={alias:"lastName",args:null,kind:"ScalarField",name:"last_name",storageKey:null},g={alias:"profilePhotoURIs",args:null,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},h={alias:"phone",args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:"phoneNumber",args:null,kind:"ScalarField",name:"national_number",storageKey:null},{alias:"countryCode",args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"fallback_phone_number",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},k={alias:"birthday",args:null,concreteType:"PageContactBirthday",kind:"LinkedField",name:"contact_birthday",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null}],storageKey:null},l={alias:"address",args:null,kind:"ScalarField",name:"page_contact_address",storageKey:null},m={alias:"city",args:null,kind:"ScalarField",name:"city_name",storageKey:null},n={alias:"state",args:null,kind:"ScalarField",name:"page_contact_state",storageKey:null},o={alias:"zipCode",args:null,kind:"ScalarField",name:"zip_code",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},q={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[p],storageKey:null},r={alias:"isOnline",args:null,kind:"ScalarField",name:"is_online",storageKey:null},s={alias:"canSendSMS",args:null,kind:"ScalarField",name:"can_send_sms",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"email_subscription_status",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"user_has_unsubscribed_from_email",storageKey:null},v={alias:"servicesVerticalPageBasedInfo",args:null,concreteType:"ServicesVerticalPageBasedInfo",kind:"LinkedField",name:"services_vertical_info",plural:!1,selections:[{alias:"isPageEligibleForAppointmentCalendar",args:null,kind:"ScalarField",name:"is_eligible_for_appointment_calendar",storageKey:null},{alias:"isPageEligibleForSMS",args:null,kind:"ScalarField",name:"is_page_eligible_for_sms",storageKey:null},{alias:"isPageEligibleForEmail",args:null,kind:"ScalarField",name:"is_page_eligible_for_email",storageKey:null},{alias:"appointmentConfirmationContent",args:null,kind:"ScalarField",name:"appointment_confirmation_content",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"CRMManualContactCreationDialogBodyClientDetailsQuery",selections:[{alias:null,args:c,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:"contact",args:d,concreteType:"PageContact",kind:"LinkedField",name:"page_contact",plural:!1,selections:[e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,u],storageKey:null},v],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"CRMManualContactCreationDialogBodyClientDetailsQuery",selections:[{alias:null,args:c,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:"contact",args:d,concreteType:"PageContact",kind:"LinkedField",name:"page_contact",plural:!1,selections:[e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,u,p],storageKey:null},v,p],storageKey:null}]},params:{id:"2594084994006424",metadata:{},name:"CRMManualContactCreationDialogBodyClientDetailsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CRMManualContactCreationDialogBodyNoContactPageInfoQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"page_id"}],b=[{kind:"Variable",name:"id",variableName:"page_id"}],c={alias:"hasConsentToCRMTos",args:null,kind:"ScalarField",name:"has_consent_to_crm_tos",storageKey:null},d={alias:"servicesVerticalPageBasedInfo",args:null,concreteType:"ServicesVerticalPageBasedInfo",kind:"LinkedField",name:"services_vertical_info",plural:!1,selections:[{alias:"isPageEligibleForAppointmentCalendar",args:null,kind:"ScalarField",name:"is_eligible_for_appointment_calendar",storageKey:null},{alias:"shouldShowLegalNotice",args:null,kind:"ScalarField",name:"should_show_crm_legal_notice",storageKey:null},{alias:"isPageEligibleForSMS",args:null,kind:"ScalarField",name:"is_page_eligible_for_sms",storageKey:null},{alias:"isPageEligibleForEmail",args:null,kind:"ScalarField",name:"is_page_eligible_for_email",storageKey:null},{alias:"appointmentConfirmationContent",args:null,kind:"ScalarField",name:"appointment_confirmation_content",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CRMManualContactCreationDialogBodyNoContactPageInfoQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c,d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CRMManualContactCreationDialogBodyNoContactPageInfoQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c,d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"2373907965988599",metadata:{},name:"CRMManualContactCreationDialogBodyNoContactPageInfoQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("XCRMContactPhotoUploaderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/crm/contact_creation/photo_upload/",{container_width:{type:"Int",required:!0},container_height:{type:"Int",required:!0}})}),null);
__d("CRMManualContactCreationDialogActions",["ActorURI","CRMManualContactCreationDialogActionTypes","FileInputUploader","PagesReactDispatcher","XCRMContactPhotoUploaderAsyncController"],(function(a,b,c,d,e,f){"use strict";f.init=a;f.initSaving=c;f.initCompleted=d;f.fetchedPageInfo=e;f.updateLegalNotice=A;f.markLegalNoticeAsRead=B;f.saveSuccess=C;f.saveError=D;f.removePhoto=E;f.setInitialParams=F;f.uploadPhoto=G;f.updateField=H;f.updatePhoneNumberValid=I;f.onUploadSuccess=J;f.onUploadFailure=K;f.clear=L;f.validateBeforeSend=M;f.hideErrorDialog=N;f.updatePhoneNumberConsent=O;f.closeCreationSuccessToast=P;var g=(a=b("CRMManualContactCreationDialogActionTypes")).CRM_CLEAR_CONTACT_FORM,h=a.CRM_CONTACT_ADD_CLIENT_SAVE_FAIL,i=a.CRM_CONTACT_ADD_CLIENT_SAVE_SUCCESS,j=a.CRM_CONTACT_ADD_CLIENT_SAVING,k=a.CRM_CONTACT_CLOSE_CREATION_SUCCESS_TOAST,l=a.CRM_CONTACT_DIALOG_INIT_LOADED_CONTACT,m=a.CRM_CONTACT_FETCHED_NO_CONTACT_PAGE_INFO,n=a.CRM_CONTACT_INIT_COMPLETED,o=a.CRM_CONTACT_MARK_LEGAL_NOTICE_AS_READ,p=a.CRM_CONTACT_PHONE_CONSENT_CHECKBOX_CHANGE,q=a.CRM_CONTACT_PHOTO_UPLOAD_FAIL,r=a.CRM_CONTACT_PHOTO_UPLOAD_START,s=a.CRM_CONTACT_PHOTO_UPLOAD_SUCCESS,t=a.CRM_CONTACT_REMOVE_PHOTO,u=a.CRM_CONTACT_SET_INITIAL_PARAMS,v=a.CRM_CONTACT_UPDATE_FIELD,w=a.CRM_CONTACT_UPDATE_LEGAL_NOTICE,x=a.CRM_CONTACT_UPDATE_PHONE_VALIDATION,y=a.CRM_CREATE_DIALOG_HIDE_ERROR_DIALOG,z=a.CRM_CREATE_DIALOG_VALILDATE_BEFORE_SAVE;function a(a,c){b("PagesReactDispatcher").dispatch({type:l,payload:{contact:a,contactPageInfo:c}})}function c(){b("PagesReactDispatcher").dispatch({type:j})}function d(){b("PagesReactDispatcher").dispatch({type:n})}function e(a){b("PagesReactDispatcher").dispatch({type:m,payload:{shouldShowLegalNotice:a.shouldShowLegalNotice,isPageEligibleForSMS:a.isPageEligibleForSMS,isPageEligibleForEmail:a.isPageEligibleForEmail,appointmentConfirmationContent:a.appointmentConfirmationContent}})}function A(a){b("PagesReactDispatcher").dispatch({type:w,payload:{shouldShowLegalNotice:a}})}function B(){b("PagesReactDispatcher").dispatch({type:o,payload:{}})}function C(a){b("PagesReactDispatcher").dispatch({type:i,payload:{addedOrUpdatedClientID:a}})}function D(a){b("PagesReactDispatcher").dispatch({type:h,payload:{error:a}})}function E(){b("PagesReactDispatcher").dispatch({type:t})}function F(a,c,d){b("PagesReactDispatcher").dispatch({type:u,payload:{firstName:a,lastName:c,appointmentID:d}})}function G(a,c){var d=this,e=b("XCRMContactPhotoUploaderAsyncController").getURIBuilder().setInt("container_width",100).setInt("container_height",100).getURI();e=b("ActorURI").create(e,a.toString());a=new(b("FileInputUploader"))(c).setURI(e);a.subscribe("failure",function(a,b){return d.onUploadFailure(b)});a.subscribe("success",function(a,b){return d.onUploadSuccess(b)});a.send();b("PagesReactDispatcher").dispatch({type:r})}function H(a,c){b("PagesReactDispatcher").dispatch({type:v,payload:{fieldKey:a,value:c}})}function I(a){b("PagesReactDispatcher").dispatch({type:x,payload:{isPhoneNumberValid:a}})}function J(a){a=a.response.payload;!a.thumbSrc?b("PagesReactDispatcher").dispatch({type:q}):b("PagesReactDispatcher").dispatch({type:s,payload:{coverPhotoData:{src:a.thumbSrc,id:a.photoID}}})}function K(){b("PagesReactDispatcher").dispatch({type:q})}function L(){b("PagesReactDispatcher").dispatch({type:g})}function M(){b("PagesReactDispatcher").dispatch({type:z})}function N(){b("PagesReactDispatcher").dispatch({type:y})}function O(a){b("PagesReactDispatcher").dispatch({type:p,payload:{canSendSMS:a}})}function P(){b("PagesReactDispatcher").dispatch({type:k})}}),null);
__d("CRMManualContactCreationDialogEmailRow.react",["ix","cx","fbt","CRMContactCreationFields","CRMManualContactCreationDialogActions","FDSSelector.react","FDSSelectorItem.react","FDSText.react","Image.react","React","ServicesUIText.react","SUIBusinessTheme","SUITextInput.react","Tooltip.react","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";e.exports=a;var j=b("React");function a(a){var c=a.email!==null&&a.email!==""&&a.errors==null,d=a.emailSubscriptionStatus;a.emailSubscriptionStatus==="UNCONFIRMED"&&(d=null);var e=null,f=j.jsxs("div",{className:"_7-d9",children:[j.jsx(b("Image.react"),{className:"_7-da",src:g("504589")}),j.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",textAlign:"center",children:i._("{contactName} has unsubscribed from receiving marketing emails. You won't be able to send email to this email address.",[i._param("contactName",a.firstName)])})]});a.contactHasUnsubscribedFromEmail||(e=j.jsx(b("Tooltip.react"),{tooltip:c===!0?null:i._("Enter an email address to choose the email preference"),children:j.jsxs(b("FDSSelector.react"),{isDisabled:!c,label:i._("Selector for Email Subscription Status"),labelIsHidden:!0,minMenuWidth:300,onChange:function(a){return b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").EMAIL.subscriptionStatus,a)},placeholder:i._("Confirm Preference"),size:"medium",value:d,children:[j.jsx(b("FDSSelectorItem.react"),{label:i._("Subscribed"),subText:i._("This contact has given you permission to send email updates to this email address. You can include subscribed contacts in your target audience when sending email."),value:"SUBSCRIBED"}),j.jsx(b("FDSSelectorItem.react"),{label:i._("Unsubscribed"),subText:i._("This contact said they don't want you to send email updates to this email address. You won't be able to send email to unsubscribed contacts."),value:"UNSUBSCRIBED"}),j.jsx(b("FDSSelectorItem.react"),{label:i._("Preference Unknown"),subText:i._("This contact hasn't yet subscribed or unsubscribed to receive email updates at this email address. You can't include contacts with an unknown preference in your target audience when sending email."),value:"NONSUBSCRIBER"})]})}),f=j.jsx("div",{className:"_7-d9",children:j.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:i._("You can only send marketing emails to subscribed contacts.")})}));return j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"_6l-x _2pio",children:[j.jsx("div",{className:"_6l_7",children:j.jsx(b("ServicesUIText.react"),{size:"small",weight:"bold",children:b("CRMContactCreationFields").EMAIL.label})}),j.jsxs("div",{className:"_6mk5 _2pit",children:[j.jsx(b("SUITextInput.react"),{errorMessage:a.errors,errorTooltipPosition:"right",margin:"_3-8_",maxLength:b("CRMContactCreationFields").EMAIL.maxLength,onChange:function(a){b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").EMAIL.key,a)},placeholder:b("CRMContactCreationFields").EMAIL.placeholder,theme:b("SUIBusinessTheme"),value:a.email,width:"100%"}),e]})]}),f]})}}),null);
__d("CRMManualContactCreationDialogStore",["errorCode","fbt","CRMClientListActionTypes","CRMContactCreationFields","CRMManualContactCreationDialogActionTypes","FluxReduceStore","PagesReactDispatcher","immutable","isEmail","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("CRMClientListActionTypes").CRM_IMPORT_CONTACTS,j=(a=b("CRMManualContactCreationDialogActionTypes")).CRM_CLEAR_CONTACT_FORM,k=a.CRM_CONTACT_ADD_CLIENT_SAVE_FAIL,l=a.CRM_CONTACT_ADD_CLIENT_SAVE_SUCCESS,m=a.CRM_CONTACT_ADD_CLIENT_SAVING,n=a.CRM_CONTACT_CLOSE_CREATION_SUCCESS_TOAST,o=a.CRM_CONTACT_DIALOG_INIT_LOADED_CONTACT,p=a.CRM_CONTACT_FETCHED_NO_CONTACT_PAGE_INFO,q=a.CRM_CONTACT_INIT_COMPLETED,r=a.CRM_CONTACT_MARK_LEGAL_NOTICE_AS_READ,s=a.CRM_CONTACT_PHONE_CONSENT_CHECKBOX_CHANGE,t=a.CRM_CONTACT_PHOTO_UPLOAD_FAIL,u=a.CRM_CONTACT_PHOTO_UPLOAD_START,v=a.CRM_CONTACT_PHOTO_UPLOAD_SUCCESS,w=a.CRM_CONTACT_REMOVE_PHOTO,x=a.CRM_CONTACT_SET_INITIAL_PARAMS,y=a.CRM_CONTACT_UPDATE_FIELD,z=a.CRM_CONTACT_UPDATE_LEGAL_NOTICE,A=a.CRM_CONTACT_UPDATE_PHONE_VALIDATION,B=a.CRM_CREATE_DIALOG_HIDE_ERROR_DIALOG,C=a.CRM_CREATE_DIALOG_VALILDATE_BEFORE_SAVE,D=/^[\w ]*$/gm,E=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({address:null,appointmentConfirmationContent:null,appointmentID:null,birthDay:null,birthMonth:null,city:null,countryCode:null,email:null,errors:{email:null,firstName:null,zipCode:null,phoneNumber:null,birthDay:null,birthMonth:null},firstName:null,fallbackPhoneNumber:null,canSendSMS:!1,isCreationSuccessful:!1,isEmailValid:!0,isFirstNameValid:!0,isFormValid:!0,isSubmitting:!1,isOnlineContact:!1,isPageEligibleForSMS:!1,isPageEligibleForEmail:!1,isPhoneNumberValid:!0,isInitializing:!0,isUploadingPhoto:!1,isZipcodeValid:!0,lastName:null,originalCanSendSMS:!1,phoneNumber:null,photoID:null,photoSrc:null,submitClientRequested:!1,closeDialog:!1,isLegalNoticeRead:!1,shouldShowLegalNotice:!1,showErrorDialog:!1,state:null,zipCode:null,emailSubscriptionStatus:null,contactHasUnsubscribedFromEmail:!1}));c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new E()};d.reduce=function(a,c){var d,e,f,g,h=c.type;c=c.payload;switch(h){case q:return a.set("isInitializing",!1);case y:h=this.validateField(c.fieldKey,c.value,a).set(c.fieldKey,c.value);h=this.clearErrorMessage(h);return h;case m:return a.set("isSubmitting",!0).set("submitClientRequested",!1);case n:return a.set("isCreationSuccessful",!1);case u:return a.set("isUploadingPhoto",!0);case v:return a.set("isUploadingPhoto",!1).set("photoID",c.coverPhotoData.id).set("photoSrc",c.coverPhotoData.src);case t:return a.set("isUploadingPhoto",!1);case k:h=a;if(c.error)return this.setErrorState(c,a).set("isSubmitting",!1);else h=a.set("showErrorDialog",!0);return h.set("isSubmitting",!1);case A:return a.set("isPhoneNumberValid",c.isPhoneNumberValid);case w:return a.set("photoID",null).set("photoSrc",null);case l:return a.set("isSubmitting",!1).set("closeDialog",!0).set("isCreationSuccessful",!0);case x:h=a.set("appointmentID",c.appointmentID).set("firstName",c.firstName).set("lastName",c.lastName);h=this.validateField(b("CRMContactCreationFields").FIRST_NAME.key,h.firstName,h);return h;case j:return new E();case C:h=this.validateField(b("CRMContactCreationFields").FIRST_NAME.key,a.firstName,a);h=this.validateBirthDate(h.birthDay,h.birthMonth,h);this.isValidBirthDate(h.birthDay,h.birthMonth)&&h.isFirstNameValid&&(h=h.set("submitClientRequested",!0));return h;case B:return a.set("showErrorDialog",!1);case s:return a.set("canSendSMS",c.canSendSMS);case z:return a.set("shouldShowLegalNotice",c.shouldShowLegalNotice);case r:return a.set("isLegalNoticeRead",!0);case p:return a.set("isInitializing",!1).set("shouldShowLegalNotice",c.shouldShowLegalNotice).set("isPageEligibleForSMS",c.isPageEligibleForSMS).set("isPageEligibleForEmail",c.isPageEligibleForEmail).set("appointmentConfirmationContent",c.appointmentConfirmationContent);case o:var D=c.contact;c=c.contactPageInfo;d=D==null?void 0:(d=D.phone)==null?void 0:d.countryCode;d=d?parseInt(d,10):null;e=D==null?void 0:(e=D.birthday)==null?void 0:e.day;f=D==null?void 0:(f=D.birthday)==null?void 0:f.month;e===0&&(e=null);f===0&&(f=null);h=a.set("firstName",D.firstName).set("lastName",D.lastName).set("photoSrc",D.profilePhotoURIs.length>0?D.profilePhotoURIs[0].uri:null).set("phoneNumber",(g=D)!=null?(g=g.phone)!=null?g.phoneNumber:g:g).set("fallbackPhoneNumber",D.fallback_phone_number).set("countryCode",d).set("email",D.email).set("emailSubscriptionStatus",D.email_subscription_status).set("contactHasUnsubscribedFromEmail",D.user_has_unsubscribed_from_email).set("birthDay",e).set("birthMonth",f).set("address",D.address).set("city",D.city).set("state",D.state).set("zipCode",D.zipCode).set("isOnlineContact",D.isOnline).set("isInitializing",!1).set("canSendSMS",D.canSendSMS).set("originalCanSendSMS",D.canSendSMS).set("isPageEligibleForSMS",c==null?void 0:c.isPageEligibleForSMS).set("isPageEligibleForEmail",c==null?void 0:c.isPageEligibleForEmail).set("appointmentConfirmationContent",c==null?void 0:c.appointmentConfirmationContent);h=this.validateField(b("CRMContactCreationFields").FIRST_NAME.key,h.firstName,h);h=this.validateField(b("CRMContactCreationFields").EMAIL.key,h.email,h);h=this.validateField(b("CRMContactCreationFields").ZIPCODE.key,h.zipCode,h);return h;case i:return a.set("isCreationSuccessful",!1);default:return a}};d.isValidBirthDate=function(a,b){return b===null&&a===null||b!==null&&a!==null?!0:!1};d.clearErrorMessage=function(a){var b=babelHelpers["extends"]({},a.errors);this.isValidBirthDate(a.birthDay,a.birthMonth)&&(b.birthDay=null,b.birthMonth=null);return a.set("errors",babelHelpers["extends"]({},b))};d.validateBirthDate=function(a,b,c){var d=babelHelpers["extends"]({},c.errors);if(this.isValidBirthDate(a,b))d.birthDay=null,d.birthMonth=null;else{a=h._("Ki\u1ec3m tra xem b\u1ea1n \u0111\u00e3 nh\u1eadp \u0111\u00fang ng\u00e0y sinh c\u1ee7a ng\u01b0\u1eddi li\u00ean h\u1ec7 ch\u01b0a.");c.birthDay===null&&(d.birthDay=a);c.birthMonth===null&&(d.birthMonth=a)}return c.set("errors",babelHelpers["extends"]({},d))};d.validateField=function(a,c,d){var e=babelHelpers["extends"]({},d.errors),f=!0;switch(a){case b("CRMContactCreationFields").FIRST_NAME.key:if(d.isOnlineContact)return d;c==null||c.trim()===""?(e[b("CRMContactCreationFields").FIRST_NAME.key]=h._("B\u1ea1n ph\u1ea3i nh\u1eadp t\u00ean"),f=!1):e[b("CRMContactCreationFields").FIRST_NAME.key]=null;return d.set("isFirstNameValid",f).set("errors",babelHelpers["extends"]({},e));case b("CRMContactCreationFields").EMAIL.key:c!==null&&c!==""&&!b("isEmail")(b("nullthrows")(c))?(e[b("CRMContactCreationFields").EMAIL.key]=h._("Email b\u1ea1n \u0111\u00e3 nh\u1eadp kh\u00f4ng ch\u00ednh x\u00e1c. Vui l\u00f2ng th\u1eed l\u1ea1i."),f=!1):e[b("CRMContactCreationFields").EMAIL.key]=null;return d.set("isEmailValid",f).set("errors",babelHelpers["extends"]({},e));case b("CRMContactCreationFields").ZIPCODE.key:c!==null&&c!==""&&b("nullthrows")(c).match(D)===null?(e[b("CRMContactCreationFields").ZIPCODE.key]=h._("H\u00e3y s\u1eed d\u1ee5ng ch\u1eef c\u00e1i ho\u1eb7c s\u1ed1."),f=!1):e[b("CRMContactCreationFields").ZIPCODE.key]=null;return d.set("isZipcodeValid",f).set("errors",babelHelpers["extends"]({},e))}return d};d.setErrorState=function(a,c){a=a.error;if(a){var d=babelHelpers["extends"]({},c.errors);if(a.code===1373040){d[b("CRMContactCreationFields").PHONE_NUMBER.key]=a.description;return c.set("isPhoneNumberValid",!1).set("errors",babelHelpers["extends"]({},d))}}return c};d.isFormValid=function(){var a=this.getState();return a.isPhoneNumberValid&&(a.isOnlineContact||a.isFirstNameValid)&&a.isEmailValid&&a.isZipcodeValid};d.canSubmitForm=function(){var a=this.getState();return this.isFormValid()&&!a.isSubmitting&&!a.isUploadingPhoto};d.isLegalNoticeRead=function(){return this.getState().isLegalNoticeRead};d.getContact=function(){var a=this.getState(),c=null;a.birthDay!==null&&a.birthDay!==void 0&&a.birthMonth!==null&&a.birthMonth!==void 0&&(c={day:parseInt(b("nullthrows")(a.birthDay),10),month:parseInt(b("nullthrows")(a.birthMonth),10)});var d=null;a.countryCode!=null&&(d=a.countryCode.toString());return{id:null,address:a.address,birthdate:c,countryCode:d,city:a.city,email:a.email,firstName:a.firstName,lastName:a.lastName,phoneNumber:a.phoneNumber,photoID:a.photoID,state:a.state,zipCode:a.zipCode,canSendSMS:a.canSendSMS,emailSubscriptionStatus:a.emailSubscriptionStatus}};d.isLoading=function(){var a=this.getState();return a.isSubmitting||a.isUploadingPhoto};return c}(b("FluxReduceStore"));c.__moduleID=e.id;d=new c(b("PagesReactDispatcher"));e.exports=d}),null);
__d("CRMPhotoUploader.react",["ix","cx","fbt","FileInput.react","Image.react","Link.react","React","Tooltip","asset","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onFileChange=function(a){d.props.onPhotoChange&&d.props.onPhotoChange(a)},d.onFileRemove=function(){b("nullthrows")(d.fileInput).getFileInput().clear(),d.props.onPhotoRemoveClick()},d.showFileInputDialog=function(){var a=b("nullthrows")(d.fileInput).getFileInput().getInput(),c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0);a.dispatchEvent(c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getPhotoOverlay=function(){var a=i._("Ch\u1ec9nh s\u1eeda \u1ea3nh"),c=i._("X\u00f3a \u1ea3nh");return j.jsx("div",{className:"_6onu uiContextualLayerParent",children:j.jsxs("div",{children:[j.jsx("button",babelHelpers["extends"]({"aria-label":c,className:"_6vh-",onClick:this.onFileRemove,tabIndex:"0"},b("Tooltip").propsFor(c,"below"),{children:j.jsx(b("Image.react"),{src:g("493878")})})),j.jsx("button",babelHelpers["extends"]({"aria-label":a,className:"_6onv",onClick:this.showFileInputDialog,tabIndex:"0"},b("Tooltip").propsFor(a,"below"),{children:j.jsx("div",{className:"_6onw"})}))]})})};d.render=function(){var a=this;return j.jsx("div",{className:"_6ol9",children:j.jsx("div",{className:"_6olf",children:j.jsx(b("FileInput.react"),{accept:"image/*",disabled:this.props.isUploadingPhoto,name:"file",onChange:this.onFileChange,ref:function(b){a.fileInput=b},children:j.jsx(b("Link.react"),{children:this.props.photoSrc!==null&&this.props.photoSrc!==void 0&&this.props.photoSrc!==""?j.jsxs("div",{className:"_6olg",children:[j.jsx(b("Image.react"),{className:"_6olh _6oli",src:this.props.photoSrc}),this.getPhotoOverlay()]}):j.jsx("div",{className:"_6olk",children:j.jsx(b("Image.react"),{src:g("624889")})})})})})})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMManualContactCreationDialogBody.react",["cx","fbt","CenteredContainer.react","CRMConsentToTOSDialogBody.react","CRMContactCreationFields","CRMEventsLogger","CRMManualContactCreationDialogActions","CRMManualContactCreationDialogEmailRow.react","CRMManualContactCreationDialogStore","CRMPhotoUploader.react","DateConsts","DateStrings","FDSCheckboxInput.maintenance.react","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","FDSLink.react","FDSText.react","FluxContainer","Image.react","PagesReactDispatcher","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","ServicesUINoProfileImage.react","ServicesUIPhoneNumberInput.react","ServicesUISpinner.react","ServicesUIText.react","SUIBusinessTheme","SUITextInput.react","promiseDone","CRMManualContactCreationDialogBodyClientDetailsQuery.graphql","CRMManualContactCreationDialogBodyNoContactPageInfoQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=b("React"),l="add_customer_form",m=i!==void 0?i:i=b("CRMManualContactCreationDialogBodyClientDetailsQuery.graphql"),n=j!==void 0?j:j=b("CRMManualContactCreationDialogBodyNoContactPageInfoQuery.graphql");a=function(a){babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("CRMManualContactCreationDialogStore")]};c.calculateState=function(a){var c=b("CRMManualContactCreationDialogStore").getState();a=a?a.showMoreFields:!1;return{address:c.address,appointmentConfirmationContent:c.appointmentConfirmationContent,birthDay:c.birthDay,birthMonth:c.birthMonth,email:c.email,errors:c.errors,firstName:c.firstName,canSendSMS:c.canSendSMS,isInitializing:c.isInitializing,isOnlineContact:c.isOnlineContact,isPageEligibleForSMS:c.isPageEligibleForSMS,isPageEligibleForEmail:c.isPageEligibleForEmail,isPhoneNumberValid:c.isPhoneNumberValid,isUploadingPhoto:c.isUploadingPhoto,lastName:c.lastName,countryCode:c.countryCode,originalCanSendSMS:c.originalCanSendSMS,phoneNumber:c.phoneNumber,fallbackPhoneNumber:c.fallbackPhoneNumber,photoSrc:c.photoSrc,city:c.city,shouldShowLegalNotice:c.shouldShowLegalNotice,showMoreFields:a,state:c.state,zipCode:c.zipCode,emailSubscriptionStatus:c.emailSubscriptionStatus,contactHasUnsubscribedFromEmail:c.contactHasUnsubscribedFromEmail}};function c(c){var d;d=a.call(this,c)||this;d.onPhotoChange=function(a){var c;c=((c=a)!=null?(c=c.target)!=null?(c=c.files)!=null?c.length:c:c:c)||0;if(c!==1)return;b("CRMManualContactCreationDialogActions").uploadPhoto(d.props.pageID,a.target)};d.showMoreFieldsClick=function(){d.setState({showMoreFields:!0})};d.monthLabels=b("DateStrings").getMonthNames();b("CRMManualContactCreationDialogActions").clear();return d}var d=c.prototype;d.componentDidMount=function(){var a=this;b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores());b("RelayAPIConfig").DO_NOT_USE_setActorID(this.props.pageID);var c=this.props.referrer?new Map().set("referrer",this.props.referrer):null,d=null;this.props.appointmentID!=null&&(b("CRMManualContactCreationDialogActions").setInitialParams(this.props.firstName,this.props.lastName,this.props.appointmentID),d="appoibtment_save");this.props.contactID!=null?(d="edit_customer_button",b("promiseDone")(b("RelayModern").fetchQuery(b("RelayFBEnvironment"),m,{page_id:this.props.pageID,page_contact_id:this.props.contactID}),function(a){var c,d=(a==null?void 0:a.page)||{};d=d.servicesVerticalPageBasedInfo;c=((c=d.isPageEligibleForAppointmentCalendar)!=null?c:!1)?d:{};var e=c.isPageEligibleForSMS;e=e===void 0?!1:e;var f=c.isPageEligibleForEmail;d=f===void 0?(d=d.isPageEligibleForEmail)!=null?d:!1:f;f=c.appointmentConfirmationContent;c=f===void 0?null:f;return b("CRMManualContactCreationDialogActions").init(a.page.contact,{isPageEligibleForSMS:e,isPageEligibleForEmail:d,appointmentConfirmationContent:c})}),b("CRMEventsLogger").log(this.props.pageID,"add_customr_form_impression",d,l,this.props.contactID,c)):b("promiseDone")(b("RelayModern").fetchQuery(b("RelayFBEnvironment"),n,{page_id:this.props.pageID}),function(d){var e;d=(d==null?void 0:d.page)||{};var f=d.hasConsentToCRMTos;f=f===void 0?!1:f;d=d.servicesVerticalPageBasedInfo;e=((e=d.isPageEligibleForAppointmentCalendar)!=null?e:!1)?d:{};var g=e.shouldShowLegalNotice;f=g===void 0?!f:g;g=e.isPageEligibleForSMS;g=g===void 0?!1:g;var h=e.isPageEligibleForEmail;d=h===void 0?(d=d.isPageEligibleForEmail)!=null?d:!1:h;h=e.appointmentConfirmationContent;e=h===void 0?null:h;f?b("CRMEventsLogger").log(a.props.pageID,"legal_notice_agreement_impression","add_customer_button",l,null,c):b("CRMEventsLogger").log(a.props.pageID,"add_customr_form_impression","add_customer_button",l,null,c);return b("CRMManualContactCreationDialogActions").fetchedPageInfo({shouldShowLegalNotice:f,isPageEligibleForSMS:g,isPageEligibleForEmail:d,appointmentConfirmationContent:e})})};d.getDayLabels=function(a){var b=[];a=this.getMaxDay(a);for(var c=1;c<=a;c++)b.push(c.toString());return b};d.getMaxDay=function(a){if(a==null)return 31;return parseInt(a,10)===2?29:b("DateConsts").getDaysInMonth(new Date().getFullYear(),parseInt(a,10))};d.getLoading=function(){return k.jsx("div",{className:"_6kx_",children:k.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"})})};d.getError=function(){return k.jsx("div",{className:"_6kx_",children:h._("\u0110\u00e3 x\u1ea3y ra l\u1ed7i. Vui l\u00f2ng th\u1eed l\u1ea1i sau.")})};d.onPhotoRemoveClick=function(){b("CRMManualContactCreationDialogActions").removePhoto()};d.onPhoneNumberChange=function(a,c){b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").PHONE_NUMBER.key,a),b("CRMManualContactCreationDialogActions").updatePhoneNumberValid(c)};d.getInputRow=function(a,c){return k.jsxs("div",{className:"_6l-x _2pio",children:[k.jsx("div",{className:"_6l_7",children:k.jsx(b("ServicesUIText.react"),{size:"small",weight:"bold",children:a.label})}),k.jsx("div",{className:"_6l_8 _2pit",children:k.jsx(b("SUITextInput.react"),{disabled:c===!0,errorMessage:this.state.errors[a.key],errorTooltipPosition:"right",maxLength:a.maxLength,onChange:function(c){return b("CRMManualContactCreationDialogActions").updateField(a.key,c)},placeholder:a.placeholder,theme:b("SUIBusinessTheme"),value:this.state[a.key]})})]})};d.shouldShowSMSConsent=function(){var a=this.state[b("CRMContactCreationFields").PHONE_NUMBER.key]!==null&&this.state[b("CRMContactCreationFields").PHONE_NUMBER.key]!=="";return this.state.isPageEligibleForSMS&&!this.state.originalCanSendSMS&&a};d.getPhoneNumberRow=function(){return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"_6l-x _2pio",children:[k.jsx("div",{className:"_6l_7",children:k.jsx(b("ServicesUIText.react"),{size:"small",weight:"bold",children:b("CRMContactCreationFields").PHONE_NUMBER.label})}),k.jsx(b("ServicesUIPhoneNumberInput.react"),{className:"_6mk5 _2pit",consumerPhoneCode:this.state.countryCode,consumerPhoneNumber:this.state[b("CRMContactCreationFields").PHONE_NUMBER.key]==null?this.state.fallbackPhoneNumber:this.state[b("CRMContactCreationFields").PHONE_NUMBER.key],includePhoneCodeInTypeahead:!0,onCountryCodeChange:this.onCountryCodeChange,onPhoneNumberChange:this.onPhoneNumberChange,phoneInputClassName:"_6mk6",phoneNumberCustomError:h._("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\u1ea1n nh\u1eadp kh\u00f4ng ch\u00ednh x\u00e1c. Vui l\u00f2ng nh\u1eadp \u0111\u00fang s\u1ed1 \u0111i\u1ec7n tho\u1ea1i bao g\u1ed3m c\u1ea3 m\u00e3 v\u00f9ng."),placeholder:b("CRMContactCreationFields").PHONE_NUMBER.placeholder,validPhoneNumber:this.state.isPhoneNumberValid})]}),this.shouldShowSMSConsent()?k.jsx("div",{className:"_74x- _2pio",children:k.jsx(b("FDSCheckboxInput.maintenance.react"),{label:h._("B\u1ea1n x\u00e1c nh\u1eadn r\u1eb1ng m\u00ecnh c\u00f3 quy\u1ec1n thay m\u1eb7t doanh nghi\u1ec7p trao \u0111\u1ed5i v\u1edbi ng\u01b0\u1eddi li\u00ean h\u1ec7 n\u00e0y qua tin nh\u1eafn v\u0103n b\u1ea3n (SMS)."),onChange:b("CRMManualContactCreationDialogActions").updatePhoneNumberConsent,value:this.state.canSendSMS})}):null]})};d.onCountryCodeChange=function(a,c){b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").COUNTRY_CODE.key,a)};d.getBirthdayRow=function(){var a=this.state[b("CRMContactCreationFields").BIRTH_MONTH.key],c=this.state[b("CRMContactCreationFields").BIRTH_DAY.key];c=c==null?c:c.toString();return k.jsxs("div",{className:"_6l-x _2pio",children:[k.jsx("div",{className:"_6l_7",children:k.jsx(b("ServicesUIText.react"),{size:"small",weight:"bold",children:h._("Ng\u00e0y sinh")})}),k.jsxs("div",{className:"_6mk5 _2pit",children:[k.jsxs(b("FDSDropdownSelector.react"),{errorMessage:this.state.errors.birthMonth,errorTooltipPosition:"left",placeholder:b("CRMContactCreationFields").BIRTH_MONTH.placeholder,onChange:function(a){return b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").BIRTH_MONTH.key,a)},value:a,children:[k.jsx(b("FDSDropdownSelectorOption.react"),{value:null,children:b("CRMContactCreationFields").BIRTH_MONTH.placeholder}),this.monthLabels.map(function(a,c){return k.jsx(b("FDSDropdownSelectorOption.react"),{value:c+1,children:a},c)})]}),k.jsx("div",{className:"_6mk7",children:k.jsxs(b("FDSDropdownSelector.react"),{placeholder:b("CRMContactCreationFields").BIRTH_DAY.placeholder,errorMessage:this.state.errors.birthDay,errorTooltipPosition:"right",onChange:function(a){return b("CRMManualContactCreationDialogActions").updateField(b("CRMContactCreationFields").BIRTH_DAY.key,a)},value:c,children:[k.jsx(b("FDSDropdownSelectorOption.react"),{value:null,children:b("CRMContactCreationFields").BIRTH_DAY.placeholder}),this.getDayLabels(a).map(function(a,c){return k.jsx(b("FDSDropdownSelectorOption.react"),{value:a,children:a},c)})]})})]})]})};d.getMoreFieldsButton=function(){return this.state.showMoreFields?null:k.jsx("div",{className:"_6mk8",children:k.jsx(b("FDSLink.react"),{onClick:this.showMoreFieldsClick,showUnderline:"never",children:h._("Tr\u01b0\u1eddng kh\u00e1c")})})};d.getOnlineContactPhoto=function(){var a=this.state.firstName!=null?this.state.firstName:"-";a=this.state.photoSrc!==null?k.jsx(b("Image.react"),{className:"_6olh _6oli",src:this.state.photoSrc}):k.jsx(b("ServicesUINoProfileImage.react"),{letter:a[0],size:"xlarge"});return k.jsx("div",{className:"_6ol9",children:a})};d.getForm=function(){var a=null;this.props.fromSplitFlow?a=h._("Xem l\u1ea1i v\u00e0 ch\u1ec9nh s\u1eeda th\u00f4ng tin li\u00ean h\u1ec7"):this.props.appointmentID!=null&&(a=this.state.appointmentConfirmationContent!=null?this.state.appointmentConfirmationContent:h._("Th\u00eam th\u00f4ng tin li\u00ean h\u1ec7 \u0111\u1ec3 g\u1eedi l\u1eddi nh\u1eafc v\u00e0 c\u00e1c th\u00f4ng tin li\u00ean h\u1ec7 quan tr\u1ecdng kh\u00e1c."));return k.jsxs("div",{children:[a!=null&&k.jsx("div",{className:"_76e_",children:k.jsx(b("FDSText.react"),{children:a})}),k.jsxs("div",{className:"_6kx_",children:[this.state.isOnlineContact?this.getOnlineContactPhoto():k.jsx(b("CRMPhotoUploader.react"),{isUploadingPhoto:this.state.isUploadingPhoto,onPhotoChange:this.onPhotoChange,onPhotoRemoveClick:this.onPhotoRemoveClick,pageID:this.props.pageID,photoSrc:this.state.photoSrc}),k.jsxs("div",{className:"_6l_9",children:[this.state.isOnlineContact?null:this.getInputRow(b("CRMContactCreationFields").FIRST_NAME,this.state.isOnlineContact),this.state.isOnlineContact?null:this.getInputRow(b("CRMContactCreationFields").LAST_NAME,this.state.isOnlineContact),this.getPhoneNumberRow(),this.state.isPageEligibleForEmail?k.jsx(b("CRMManualContactCreationDialogEmailRow.react"),{contactHasUnsubscribedFromEmail:this.state.contactHasUnsubscribedFromEmail,email:this.state[b("CRMContactCreationFields").EMAIL.key],emailSubscriptionStatus:this.state.emailSubscriptionStatus,errors:this.state.errors[b("CRMContactCreationFields").EMAIL.key],firstName:this.state.firstName}):this.getInputRow(b("CRMContactCreationFields").EMAIL),this.getMoreFieldsButton(),this.state.showMoreFields?k.jsxs(k.Fragment,{children:[this.getBirthdayRow(),this.getInputRow(b("CRMContactCreationFields").ADDRESS),this.getInputRow(b("CRMContactCreationFields").CITY),this.getInputRow(b("CRMContactCreationFields").STATE),this.getInputRow(b("CRMContactCreationFields").ZIPCODE)]}):null]})]})]})};d.$1=function(){b("CRMManualContactCreationDialogActions").markLegalNoticeAsRead()};d.getLegalNotice=function(){return k.jsx(b("CenteredContainer.react"),{className:"_6kx_",children:k.jsx(b("CRMConsentToTOSDialogBody.react"),{onEndReached:this.$1})})};d.render=function(){if(this.state.isInitializing||this.props.contactID&&this.state.firstName===null)return this.getLoading();else return this.state.shouldShowLegalNotice?this.getLegalNotice():this.getForm()};return c}(k.PureComponent);c=b("FluxContainer").create(a);e.exports=c}),null);
__d("CRMManualContactCreationDialogFooter.react",["cx","fbt","CRMEventsLogger","CRMManualContactCreationDialogActions","CRMManualContactCreationDialogStore","CRMMutationUtils","CurrentUser","FDSButton.react","FluxContainer","Layer","PagesReactDispatcher","React","RelayAPIConfig","ServicesUISpinner.react","SimpleXUIDialog","cxMargin","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=h._("Kh\u00f4ng th\u00eam \u0111\u01b0\u1ee3c th\u00f4ng tin li\u00ean h\u1ec7 n\u00e0y do c\u00f3 l\u1ed7i x\u1ea3y ra. H\u00e3y th\u1eed l\u1ea1i."),k=h._("Kh\u00f4ng th\u00eam \u0111\u01b0\u1ee3c ng\u01b0\u1eddi li\u00ean h\u1ec7 m\u1edbi"),l="add_customer_form";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.acceptLegalNotice=function(){if(d.state.showSpinner)return;b("CRMEventsLogger").log(d.props.pageID,"legal_notice_agreement_accept_click","accept_button",l,null,d.getCRMEventLoggerExtraData());var a={client_mutation_id:"0",actor_id:b("CurrentUser").getAccountID(),page_id:d.props.pageID};d.setState({showSpinner:!0});b("CRMMutationUtils").consentToCrmLegal({actor_id:d.props.pageID},b("emptyFunction"));b("CRMMutationUtils").updateLegalNoticeShouldShow(a,function(a,c){d.setState({showSpinner:!1}),c||b("CRMManualContactCreationDialogActions").updateLegalNotice(a==null?void 0:a.should_show_crm_legal_notice)})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMManualContactCreationDialogStore")]};c.calculateState=function(a){var c=b("CRMManualContactCreationDialogStore").getState();return{canSubmitForm:b("CRMManualContactCreationDialogStore").canSubmitForm(),closeDialog:c.closeDialog,errorDialogShown:a?a.errorDialogShown:!1,isInitializing:c.isInitializing,isLegalNoticeRead:b("CRMManualContactCreationDialogStore").isLegalNoticeRead(),shouldShowLegalNotice:c.shouldShowLegalNotice,showErrorDialog:c.showErrorDialog,showSpinner:b("CRMManualContactCreationDialogStore").isLoading(),submitClientRequested:c.submitClientRequested}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("RelayAPIConfig").DO_NOT_USE_setActorID(this.props.pageID)};d.UNSAFE_componentWillUpdate=function(a,b){!this.state.submitClientRequested&&b.submitClientRequested&&this.saveClient(),!this.state.closeDialog&&b.closeDialog&&this.closeDialog(),!this.state.showErrorDialog&&b.showErrorDialog&&this.showErrorDialog()};d.getCRMEventLoggerExtraData=function(){return this.props.referrer!=null?new Map().set("referrer",this.props.referrer):null};d.saveClient=function(){if(this.state.showSpinner)return;b("CRMEventsLogger").log(this.props.pageID,"add_customr_form_click_save","save_customer_button",l,null,this.getCRMEventLoggerExtraData());var a=this.props.pageID,c=b("CRMManualContactCreationDialogStore").getContact();if(this.state.canSubmitForm){b("CRMManualContactCreationDialogActions").initSaving();var d={first_name:c.firstName,last_name:c.lastName,country_code:c.countryCode,phone_number:c.phoneNumber,email:c.email!==""?c.email:null,contact_birthday:c.birthdate,profile_photo_id:c.photoID,page_contact_address:c.address,zip_code:c.zipCode,city_name:c.city,page_contact_state:c.state,email_subscription_status:c.emailSubscriptionStatus};if(this.props.contactID){var e=babelHelpers["extends"]({},d,{client_mutation_id:"0",actor_id:this.props.pageID,page_contact_id:this.props.contactID,can_send_sms:c.canSendSMS});b("CRMMutationUtils").updateContact(e,function(a,c){if(c){c=c.length>0?c[0]:null;b("CRMManualContactCreationDialogActions").saveError(c)}else{b("CRMManualContactCreationDialogActions").saveSuccess(a==null?void 0:(c=a.page_contact_update)==null?void 0:(a=c.page_contact)==null?void 0:a.id)}})}else{e={client_mutation_id:"0",actor_id:a,can_send_sms:c.canSendSMS,contacts:[babelHelpers["extends"]({},d,{appointment_id:b("CRMManualContactCreationDialogStore").getState().appointmentID,page_id:a})]};b("CRMMutationUtils").createContact(e,function(a,c){if(c){c=c.length>0?c[0]:null;b("CRMManualContactCreationDialogActions").saveError(c)}else{a=a==null?void 0:(c=a.page_contact_create)==null?void 0:c.page_contacts;c=a&&a.length>0?a[0].id:null;b("CRMManualContactCreationDialogActions").saveSuccess(c)}})}}};d.closeDialog=function(){var a=b("Layer").getTopmostLayer();a&&a.hide()};d.showErrorDialog=function(){var a=this;if(this.state.errorDialogShown)return;this.setState({errorDialogShown:!0});b("SimpleXUIDialog").show(j,k,function(){a.setState({errorDialogShown:!1}),b("CRMManualContactCreationDialogActions").hideErrorDialog()})};d.getCancelButton=function(){var a=this,c,d=this.getCRMEventLoggerExtraData();this.state.shouldShowLegalNotice?c=i.jsx(b("FDSButton.react"),{label:h._("L\u00fac kh\u00e1c"),layerAction:"cancel",margin:"_3-9a",onClick:function(){b("CRMEventsLogger").log(a.props.pageID,"legal_notice_agreement_deny_click","not_now_button_legal_notice",l,null,d)}}):c=i.jsx(b("FDSButton.react"),{isDisabled:this.state.showSpinner,label:h._("H\u1ee7y"),layerAction:"cancel",margin:"_3-8_",onClick:function(){b("CRMEventsLogger").log(a.props.pageID,"add_customr_form_cancel_save","cancel_customer_button",l,null,d)}});return c};d.getPrimaryButton=function(){var a;this.state.shouldShowLegalNotice?a=i.jsx(b("FDSButton.react"),{isDisabled:!this.state.isLegalNoticeRead,label:h._("Ti\u1ebfp t\u1ee5c"),margin:"_3-9a",onClick:this.acceptLegalNotice,use:"primary"}):a=i.jsx(b("FDSButton.react"),{isDisabled:!this.state.canSubmitForm,label:h._("L\u01b0u"),margin:"_3-9a",onClick:b("CRMManualContactCreationDialogActions").validateBeforeSend,use:"primary"});return a};d.getSpinner=function(){return this.state.showSpinner?i.jsx(b("ServicesUISpinner.react"),{className:"_3-8_"}):null};d.render=function(){return this.state.isInitializing?null:i.jsxs("div",{className:"_6l_c",children:[this.getSpinner(),this.getCancelButton(),this.getPrimaryButton()]})};return c}(i.PureComponent);c=b("FluxContainer").create(a);e.exports=c}),null);