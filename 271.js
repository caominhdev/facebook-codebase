if (self.CavalryLogger) { CavalryLogger.start_js(["alIuA"]); }

__d("CommerceSimplifiedInvoiceAvatarQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"user"}],b=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"user"}],concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CommerceSimplifiedInvoiceAvatarQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CommerceSimplifiedInvoiceAvatarQuery",selections:b},params:{id:"2206300639401000",metadata:{},name:"CommerceSimplifiedInvoiceAvatarQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CommerceSimplifiedInvoiceDialogQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"sellerID"}],b=[{kind:"Variable",name:"id",variableName:"sellerID"}],c=[{kind:"Literal",name:"payment_type",value:"NMOR_PAGES_COMMERCE"}],d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MCOMPurchaseProtectionDetails",kind:"LinkedField",name:"purchase_protection_details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_purchase_protection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"purchase_protection_max_amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"purchase_protection_information_url",storageKey:null}],storageKey:null}],type:"KBankPaymentProvider",abstractKey:null},e=[{alias:null,args:null,concreteType:"PaymentReceiver",kind:"LinkedField",name:"payment_receiver",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"active_providers",plural:!0,selections:[d],storageKey:'active_providers(payment_type:"NMOR_PAGES_COMMERCE")'}],storageKey:null}];c=[{alias:null,args:null,concreteType:"PaymentReceiver",kind:"LinkedField",name:"payment_receiver",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"active_providers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:'active_providers(payment_type:"NMOR_PAGES_COMMERCE")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CommerceSimplifiedInvoiceDialogQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:e,storageKey:null},{alias:null,args:b,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:e,storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CommerceSimplifiedInvoiceDialogQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:c,storageKey:null},{alias:null,args:b,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:c,storageKey:null}]},params:{id:"3093628324050795",metadata:{},name:"CommerceSimplifiedInvoiceDialogQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CommerceInvoiceAdminUtil",["FBPaymentsLinkHelper"],(function(a,b,c,d,e,f){"use strict";f.formatDollars=a;f.unformatDollars=c;f.openPaymentOnboardingPageTH=d;f.invoiceCreateData=e;function a(a){var b=[],c=0;for(var d=a.length-1;d>=0;d--)b.unshift(a[d]),c++,a[d]==="."?c=0:c===3&&d!==0&&(b.unshift(","),c=0);return b.join("")}function c(a){return a.replace(",","")}function d(a,c){a=b("FBPaymentsLinkHelper").getPageManageShopPaymentSettingsURI(a,c);window.open(a)}function e(a,b,c,d,e,f,i,j,k,l,m,n,o,p){var q=[];i=g(a,i,e,k);switch(f){case"payment_confirmation":if(d&&d.length>0){q=d.map(function(a){return h(a)});if(m!=null&&parseFloat(m.amount)>0){e={id:null,title:"Shipping",subtitle:null,currency_amount:m,quantity:"1",photo_ids:k};q.push(e)}}else q=[i];break;case"payment_request":default:q=[i];break}m={client_mutation_id:"www",actor_id:b,client:"pages_commerce",seller_id:b,buyer_id:c,is_buyer_initialized:!1,items:q,custom_shipping_options:null,notes:j,invoice_type:f,xmat_mid:o,referrer:l,interaction_id:p,discount:(d=n)!=null?d:{currency:a,amount:"0"}};return m}function g(a,b,c,d){a={currency:a,amount:b};b={id:null,title:"Amount",subtitle:null,currency_amount:a,quantity:"1",type:c,photo_ids:d};return b}function h(a){a={id:a.id,title:a.title.toString(),subtitle:a.subtitle!=null?a.subtitle.toString():"",currency_amount:a.unitPrice,quantity:a.quantity.toString()};return a}}),null);
__d("CommerceInvoiceAdminActionMoneyAmountInput.react",["cx","fbt","CommerceInvoiceAdminUtil","FBPaymentsLinkHelper","Image.react","MessengerAdsConversionFunnelTypedLogger","MessengerConversionEvent","MessengerEnvironment","Middot.react","P2PAmountUtils","PagesMarkAsPaidCurrencyUtil","React","ReactDOM","ShimButton.react","XUIError.react","XUIGrayText.react","createReactClass_DEPRECATED","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("CommerceInvoiceAdminUtil").formatDollars,j=b("CommerceInvoiceAdminUtil").unformatDollars,k=b("React"),l=1,m=1e6,n=new Map([["VND",100]]);c=b("createReactClass_DEPRECATED")({displayName:"CommerceInvoiceAdminActionMoneyAmountInput",propTypes:{currencySymbol:(a=b("prop-types")).string,disabled:a.bool,isRequesting:a.bool,onInputChange:a.func,receiversCount:a.number,value:a.string,currency:a.string,pageID:a.string},getDefaultProps:function(){return{currencySymbol:"$",disabled:!1,isRequesting:!1,onInputChange:b("emptyFunction"),receiversCount:1,value:""}},getInitialState:function(){var a;b("MessengerEnvironment").messengerui?a=236:a=200;return{fontSize:"54px",inputError:null,maxInputWidth:a,value:this.props.value,width:""}},componentDidMount:function(){this.updateAmount(this.state.value),this.props.disabled||this.initDelayedFocus()},UNSAFE_componentWillReceiveProps:function(a){this.props.value!==a.value&&this.updateAmount(a.value)},initDelayedFocus:function(){window.setTimeout(this.focus)},focus:function(){var a,c=this.state.value;this.isMounted()&&this.refs.textInput&&(a=b("ReactDOM").findDOMNode(this.refs.textInput),a!==null&&(a.focus(),c&&(c=c.length,a.setSelectionRange(c,c))))},handleAmountInputChange:function(a){a=j(a.target.value);this.clearInputError();this.updateAmount(a)},clearInputError:function(){this.setState({inputError:null})},setInputError:function(a){this.setState({inputError:a})},handleAmountInputBlur:function(a){a=j(a.target.value);var b=a.split("."),c=b[0];b=b[1];b?b.length===1&&this.updateAmount(a+"0"):b===""&&this.updateAmount(c)},updateAmount:function(a){var c=!0,d,e=n.has(this.props.currency)?parseFloat(a)>=m*n.get(this.props.currency):parseFloat(a)>=m;a=b("P2PAmountUtils").sanitizeAmount(a);d=parseFloat(a);e&&(c=!1,this.setInputError(h._("Vui l\u00f2ng nh\u1eadp s\u1ed1 ti\u1ec1n nh\u1ecf h\u01a1n")));e=a.split(".");var f=e[0];e=e[1];e!==void 0?a=(f&&parseFloat(f)!==0?f:"0")+"."+e.substr(0,2):f&&(parseFloat(f)===0?a="0":f.length>1&&f[0]==="0"&&(a=a.substr(1,a.length)));a.length===0&&(a="0");this.setValue(a);d=parseFloat(a);c=c&&!isNaN(d)&&d>0;this.props.onInputChange(a,c)},setValue:function(a){var b=this;this.setState({value:a},function(){b.setFontSize(),b.updateWidth()})},updateWidth:function(){var a=this.getMockWidth();a&&this.setState({width:Math.min(a,this.state.maxInputWidth)})},setFontSize:function(){this.state.value.length<=3?this.setState({fontSize:"54px"}):this.state.value.length<=6?this.setState({fontSize:"48px"}):this.state.value.length<=8?this.setState({fontSize:"42px"}):this.state.value.length<=9?this.setState({fontSize:"36px"}):this.setState({fontSize:"30px"})},getMockWidth:function(){var a=b("ReactDOM").findDOMNode(this.refs.mock_input);return a.offsetWidth+l},renderGroupRequestInformation:function(){if(this.props.receiversCount<=1)return null;var a=Math.round(this.state.value*this.props.receiversCount*100)/100;return k.jsxs(b("XUIGrayText.react"),{display:"block",size:"meta1",children:[h._("M\u1ed7i ng\u01b0\u1eddi"),k.jsx(b("Middot.react"),{}),h._("T\u1ed5ng s\u1ed1 {currency}{total}",[h._param("currency",this.props.currencySymbol),h._param("total",a)])]})},_onChangeCurrency:function(){var a=b("FBPaymentsLinkHelper").getPagePaymentSettingsURI(this.props.pageID,"AdminButton");new(b("MessengerAdsConversionFunnelTypedLogger"))().setName(b("MessengerConversionEvent").PAGE_CLICK_CHANGE_CURRENCY).setPageID(this.props.pageID).log();window.open(a)},render:function(){var a;return k.jsx("div",{className:"_2zja"+(this.props.isRequesting?" _2zjd":""),children:k.jsxs("label",{children:[a,k.jsxs("div",{className:"_2zje",children:[k.jsx("div",{ref:"mock_input",className:"_2zjg",children:this.state.value}),k.jsx(b("XUIError.react"),{xuiError:this.state.inputError,children:k.jsxs("div",{className:"_3y9z",children:[k.jsx(b("ShimButton.react"),{role:"button",className:"_3y9-",onClick:this._onChangeCurrency,children:k.jsx(b("Image.react"),{src:b("PagesMarkAsPaidCurrencyUtil").getIconSrc(this.props.currency)})}),k.jsx("div",{className:"_3y9_",children:k.jsx("input",{className:"_3ya0",autoFocus:!0,disabled:this.props.disabled,onBlur:this.handleAmountInputBlur,onChange:this.handleAmountInputChange,ref:"textInput",style:{width:this.state.width,fontSize:this.state.fontSize},value:i(this.state.value)})})]})}),this.renderGroupRequestInformation()]})]})})}});e.exports=c}),null);
__d("ShopFriendAvatar.react",["cx","ProfileTile.react","React","ShopParagraph.react","isStringNullOrEmpty","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.sizeIfHorizontal,d=a.sizeIfVertical,e=a.name,f=a.userID;a=a.vertical;d=a?d:c;c=a?5:2;var g=d+100;d={style:{height:d+"px",width:d+"px"}};return h.jsxs("div",{className:"_4kk1"+(e?" _44i5":"")+(a?" _2rwc":""),children:[h.jsx(b("ProfileTile.react"),{id:f,imageProps:d,size:g}),b("isStringNullOrEmpty")(e)?null:h.jsx(b("ShopParagraph.react"),{className:"_2rwf",level:c,children:e})]})};return c}(h.Component);e.exports=a;a.propTypes={sizeIfHorizontal:(c=b("prop-types")).number,sizeIfVertical:c.number,name:c.string,userID:c.string.isRequired,vertical:c.bool};a.defaultProps={sizeIfHorizontal:40,sizeIfVertical:60,vertical:!1}}),null);
__d("CommerceSimplifiedInvoiceAvatar.react",["React","RelayFBEnvironment","RelayModern","ShopFriendAvatar.react","CommerceSimplifiedInvoiceAvatarQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("RelayModern").QueryRenderer,{environment:b("RelayFBEnvironment"),query:i,variables:{user:this.props.userId},render:function(a){a.error;a=a.props;return a&&a.user?h.jsx(b("ShopFriendAvatar.react"),{name:a.user.name,userID:a.user.id}):h.jsx("div",{})}})};return c}(h.Component);e.exports=a;var i=g!==void 0?g:g=b("CommerceSimplifiedInvoiceAvatarQuery.graphql")}),null);
__d("XPagesManagerInvoicePhotoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/upload/file/invoice/photo/",{})}),null);
__d("CommerceSimplifiedInvoiceDialog.react",["ix","cx","fbt","ActorURI","CommerceInvoiceAdminActionMoneyAmountInput.react","CommerceSimplifiedInvoiceAvatar.react","FDSButton.react","FDSFooterSection.react","FDSLink.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","Grid.react","Image","JSResource","React","RelayFBEnvironment","RelayModern","ShopsOnboardingLoadingOverlay","SUIBusinessThemeContainer.react","SUINotice.react","TetraIcon.react","XPagesManagerInvoicePhotoUploadController","XUICloseButton.react","XUITextInput.react","fbicon","lazyLoadComponent","stylex","CommerceSimplifiedInvoiceDialogQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");(k||(k=b("stylex"))).inject(".ngbj85sm{padding-top:2px}",1);k.inject(".td78eobr{padding-right:26px}",1,".td78eobr{padding-left:26px}");k.inject(".rl78xhln{padding-bottom:0}",1);k.inject(".nch0832m{padding-left:0}",1,".nch0832m{padding-right:0}");k.inject(".sn8rohus{margin-top:15px}",1);k.inject(".l7ghb35v{margin-right:0}",1,".l7ghb35v{margin-left:0}");k.inject(".h6f8j9rx{margin-bottom:15px}",1);k.inject(".kmwttqpk{margin-left:0}",1,".kmwttqpk{margin-right:0}");k.inject(".om3e55n1{position:relative}",1);k.inject(".ff05a22o{right:12px}",1,".ff05a22o{left:12px}");k.inject(".s8sjc6am{position:absolute}",1);k.inject(".c5swb9bv{top:4px}",1);var m=j!==void 0?j:j=b("CommerceSimplifiedInvoiceDialogQuery.graphql"),n=b("lazyLoadComponent")(b("JSResource")("OmniPhotoUploaderDialog.react").__setRef("CommerceSimplifiedInvoiceDialog.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={error:null,isProcessing:!1,paymentAmount:"0",paymentNote:"",photos:[],shouldShowImagePicker:!1},d.$1=function(a){var b=[].concat(d.state.photos);d.setState(function(c){a.forEach(function(a){c.photos.some(function(b){return a.fbid===b.fbid})||b.push(a)});return{photos:b,shouldShowImagePicker:!1}})},d.$2=function(){d.setState({shouldShowImagePicker:!1})},d.$3=function(a){d.setState({paymentAmount:a})},d.$4=function(a){a=a.target;a instanceof HTMLInputElement&&d.setState({paymentNote:a.value})},d.$5=function(){d.setState({isProcessing:!0},function(){return d.props.onRequestPayment(d.state.paymentAmount,d.state.paymentNote,d.$6,d.$7,d.state.photos.map(function(a){return a.fbid}))})},d.$6=function(){d.setState({error:null,isProcessing:!1}),d.props.onHide()},d.$7=function(a){d.setState({error:a,isProcessing:!1})},d.$8=function(){var a=d.props,b=a.currency,c=a.onConfirmPayment;c!=null&&d.setState({isProcessing:!0},function(){var a={currency:b,amount:"0"};c(parseFloat(d.state.paymentAmount),a,a,d.state.paymentNote,d.state.photos.map(function(a){return a.fbid}),d.$6,d.$7)})},d.$10=function(){d.setState({shouldShowImagePicker:!0})},d.$12=function(a){return l.jsxs("div",{className:"_5m94",children:[l.jsx(b("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(){return d.$13(a.fbid)}}),l.jsx(b("Image"),{className:"_19tc",source:a.src}),l.jsx("div",{className:"_19td"})]},a.fbid)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$9=function(){var a=this.state.paymentAmount==="0";return l.jsx(b("FDSModalFooter.react"),{primaryButton:l.jsx(b("FDSButton.react"),{label:i._("G\u1eedi y\u00eau c\u1ea7u thanh to\u00e1n"),onClick:this.$5,use:"primary",isDisabled:a}),secondaryButton:this.props.onConfirmPayment==null?null:l.jsx(b("FDSButton.react"),{label:i._("\u0110\u00e1nh d\u1ea5u l\u00e0 \u0110\u00e3 thanh to\u00e1n"),onClick:this.$8,use:"primary",isDisabled:a})})};d.$11=function(){return l.jsxs("div",{className:"_7elz",children:[l.jsxs("div",{className:"om3e55n1",children:[l.jsx("div",{className:"nch0832m rl78xhln td78eobr ngbj85sm",children:l.jsx(b("XUITextInput.react"),{value:this.state.paymentNote,onChange:this.$4,placeholder:i._("Th\u00eam ghi ch\u00fa...")})}),l.jsx("div",{className:"c5swb9bv s8sjc6am ff05a22o",children:l.jsx(b("TetraIcon.react"),{onPress:this.$10,icon:b("fbicon")._(g("507628"),16)})})]}),this.state.photos.length>0?l.jsx(b("Grid.react"),{cols:4,className:"kmwttqpk h6f8j9rx l7ghb35v sn8rohus",children:this.state.photos.map(this.$12)}):null]})};d.$13=function(a){this.setState(function(b){return{photos:b.photos.filter(function(b){b=b.fbid;return a!==b})}})};d.$14=function(a,c,d){return l.jsxs(b("FDSModal.react"),{header:l.jsx(b("FDSModalHeader.react"),{title:"Payment"}),onHide:this.props.onHide,isShown:!0,width:450,footer:this.$9(),children:[l.jsxs(b("FDSSection.react"),{hasPadding:!1,children:[l.jsx(b("ShopsOnboardingLoadingOverlay"),{isLoading:this.state.isProcessing}),this.state.error&&l.jsx(b("FDSSection.react"),{children:l.jsx(b("SUIBusinessThemeContainer.react"),{children:l.jsx(b("SUINotice.react"),{type:"error",children:this.state.error.message})})}),l.jsx(b("FDSSection.react"),{children:l.jsx("div",{className:"_7el-",children:l.jsx(b("CommerceSimplifiedInvoiceAvatar.react"),{userId:this.props.customerId})})}),l.jsxs(b("FDSSection.react"),{children:[a===!0?l.jsx("div",{className:"_9996",children:l.jsx(b("FDSText.react"),{color:"secondary",children:i._("Eligible transactions are covered by Purchase Protection when you use Facebook Pay. {Link to learn more about purchase protection}",[i._param("Link to learn more about purchase protection",d!=null&&i._("{=Learn More}",[i._param("=Learn More",l.jsx(b("FDSLink.react"),{href:d,target:"_blank",children:i._("T\u00ecm hi\u1ec3u th\u00eam")}))]))])})}):null,l.jsx("div",{className:"_7el_",children:l.jsx(b("CommerceInvoiceAdminActionMoneyAmountInput.react"),{onInputChange:this.$3,currency:this.props.currency,pageID:this.props.pageID,value:this.state.paymentAmount,disabled:!1})}),a===!0&&c!=null&&parseInt(this.state.paymentAmount,10)>c?l.jsx("div",{className:"_9997",children:l.jsx(b("FDSText.react"),{color:"secondary",children:i._("This transaction request is too high and will not be covered by purchase protection.")})}):null]})]}),l.jsx(b("FDSFooterSection.react"),{children:this.$11()}),this.state.shouldShowImagePicker?l.jsx(n,{title:i._("T\u1ea3i \u1ea3nh l\u00ean"),onCancel:this.$2,onDoneSelecting:this.$1,pageID:this.props.pageID,config:{fileUploadURI:b("ActorURI").create(b("XPagesManagerInvoicePhotoUploadController").getURIBuilder().getURI(),this.props.pageID)}}):null]})};d.render=function(){var a=this;return l.jsx(b("RelayModern").QueryRenderer,{environment:b("RelayFBEnvironment"),query:m,render:function(b){var c,d=b.error;b=b.props;if(d)return a.$14();d=(b==null?void 0:b.page)||(b==null?void 0:b.user);b=(d==null?void 0:(b=d.payment_receiver)==null?void 0:(b=b.active_providers[0])==null?void 0:(b=b.purchase_protection_details)==null?void 0:b.is_eligible_for_purchase_protection)||!1;c=(d==null?void 0:(c=d.payment_receiver)==null?void 0:(c=c.active_providers[0])==null?void 0:(c=c.purchase_protection_details)==null?void 0:c.purchase_protection_max_amount)||0;d=(d==null?void 0:(d=d.payment_receiver)==null?void 0:(d=d.active_providers[0])==null?void 0:(d=d.purchase_protection_details)==null?void 0:d.purchase_protection_information_url)||null;return a.$14(b,c,d)},variables:{sellerID:this.props.pageID}})};return c}(l.Component);e.exports=a}),null);
__d("PagesInboxLabelsManagerDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=new(b("ExplicitRegistrationDispatcher"))({strict:!1});e.exports=a}),null);
__d("PaymentCreateInvoiceProductType",[],(function(a,b,c,d,e,f){a=Object.freeze({SHOP:"shop",CUSTOMIZED:"customized"});e.exports=a}),null);